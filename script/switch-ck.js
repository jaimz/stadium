// Generated by LiveScript 1.2.0
(function(){"use strict";function a(e,t,n){return function(){return(n||e)[t].apply(e,arguments)}}var e,t,n,r,i,s,o,u;e=require("./util.js");t="nav_stack";n="nav_item";r="switches";i="switch";s="off_right";o="off_left";u=function(){function i(e){this.click=a(this,"click",t);this.dontListen=a(this,"dontListen",t);this.listen=a(this,"listen",t);this.setView=a(this,"setView",t);if(e==null)throw new Error("Need an element to switch");this.selected=null;this.selectedIdx=-1;this.delegates=[];this.offLeft=[];this.offRight=[];this.setView(e)}i.displayName="Switch";var t=i.prototype,n=i;t.setView=function(t){this.View!=null&&this.dontListen();this.View=e.getEl(t);if(this.View!=null){this.triggers=this.View.getElementsByClassName(r);this.offRight=this.View.getElementsByClassName(s);this.offLeft=this.View.getElementsByClassName(o);this.listen();return this.selected=e.getFirstOfClass(kSelectedClass,this.triggers)}};t.listen=function(){if(this.triggers!=null)return this.triggers.addEventListener("click",this.click)};t.dontListen=function(){if(this.triggers!=null)return this.triggers.removeEventListener("click",this.click)};t.click=function(e){var t,n,r,i,u,a,f,l,c;t=e.srcElement;if(t!=null){n=t.classList;if(n.contains("switch")&&!n.contains("selected")){this.selected!=null&&this.selected.classList.remove("selected");this.selected=t;if(this.selectedIdx!==-1){r=Array.prototype.indexOf.call(this.triggers,this.selected);i=r-this.selectedIdx;if(i>0){u=-1;a=s;f=this.offRight;l=o}else{u=1;a=o;f=this.offLeft;l=s}i+=u;this.currPanel!=null&&this.currPanel.classList.add(l);while(i!==0&&f>0){c=f[0];c.classList.remove(a);c.classList.add(l)}if(f.length>0){this.currPanel=f[0];this.currPanel.classList.remove(a)}else this.currPanel=null}return n.add("selected")}}};return i}();module.exports={Switch:u}}).call(this);